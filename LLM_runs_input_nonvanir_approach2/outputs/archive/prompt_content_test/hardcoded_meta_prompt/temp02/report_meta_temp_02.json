{
    "run_timestamp": "20250611_232425",
    "target_downstream_version": "all_versions",
    "concurrency": 5,
    "temperature_setting": 0.2,
    "input_json_file": "inputs/top_11_vulns_2425.json",
    "summary": {
        "total_file_conflicts_to_process": 36,
        "files_attempted_for_llm_diff_generation": 36,
        "files_with_llm_diff_successfully_generated": 17,
        "files_skipped_pre_llm_call": 0,
        "files_with_llm_diff_generation_errors_or_skipped_in_func": 19,
        "successful_attempts_histogram": {
            "1 run": 12,
            "3 runs": 3,
            "2 runs": 2
        },
        "total_runtime_seconds_all": 11182.260000000004,
        "total_runtime_seconds_successful": 2879.59,
        "total_script_wall_clock_runtime_seconds": 2333.8805162715726,
        "total_gemini_input_tokens": 4432127,
        "total_gemini_output_tokens": 42634,
        "total_gemini_tokens": 5590115
    },
    "successfully_generated_diffs_log": [
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 79,
                "gemini_input_tokens": 14565,
                "gemini_output_tokens": 348,
                "gemini_total_tokens": 25309
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -261,6 +261,34 @@\n         if (...",
            "token_counts": {
                "prompt_tokens": 276,
                "gemini_input_tokens": 16735,
                "gemini_output_tokens": 613,
                "gemini_total_tokens": 30941
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 87,
                "gemini_input_tokens": 14565,
                "gemini_output_tokens": 359,
                "gemini_total_tokens": 26346
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "```diff\n--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -52,11 ...",
            "token_counts": {
                "prompt_tokens": 116,
                "gemini_input_tokens": 5669,
                "gemini_output_tokens": 342,
                "gemini_total_tokens": 14360
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 81,
                "gemini_input_tokens": 44580,
                "gemini_output_tokens": 1103,
                "gemini_total_tokens": 82161
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/wm/ActivityTaskManagerService.java\n+++ b/services/core/java/com/android/server/wm/ActivityTaskMana...",
            "token_counts": {
                "prompt_tokens": 217,
                "gemini_input_tokens": 112335,
                "gemini_output_tokens": 751,
                "gemini_total_tokens": 120017
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "```diff\n--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server...",
            "token_counts": {
                "prompt_tokens": 96,
                "gemini_input_tokens": 24942,
                "gemini_output_tokens": 332,
                "gemini_total_tokens": 32146
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/wm/ActivityTaskManagerService.java\n+++ b/services/core/java/com/android/server/wm/ActivityTaskMana...",
            "token_counts": {
                "prompt_tokens": 214,
                "gemini_input_tokens": 197939,
                "gemini_output_tokens": 1498,
                "gemini_total_tokens": 217971
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "```diff\n--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidge...",
            "token_counts": {
                "prompt_tokens": 288,
                "gemini_input_tokens": 150099,
                "gemini_output_tokens": 1282,
                "gemini_total_tokens": 177791
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "```diff\n--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidge...",
            "token_counts": {
                "prompt_tokens": 300,
                "gemini_input_tokens": 225504,
                "gemini_output_tokens": 1943,
                "gemini_total_tokens": 274699
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/wm/ActivityTaskManagerService.java\n+++ b/services/core/java/com/android/server/wm/ActivityTaskMana...",
            "token_counts": {
                "prompt_tokens": 220,
                "gemini_input_tokens": 98566,
                "gemini_output_tokens": 756,
                "gemini_total_tokens": 109797
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "```diff\n--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server...",
            "token_counts": {
                "prompt_tokens": 95,
                "gemini_input_tokens": 18200,
                "gemini_output_tokens": 331,
                "gemini_total_tokens": 30551
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "```diff\n--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -37,10 ...",
            "token_counts": {
                "prompt_tokens": 59,
                "gemini_input_tokens": 4749,
                "gemini_output_tokens": 185,
                "gemini_total_tokens": 15422
            }
        },
        {
            "vulnerability_id": "ASB-A-317048495",
            "file_name": "packages/SystemUI/src/com/android/systemui/clipboardoverlay/ClipboardListener.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/clipboardoverlay/ClipboardListener.java\n+++ b/packages/SystemUI/src/com/android/systemui/clip...",
            "token_counts": {
                "prompt_tokens": 158,
                "gemini_input_tokens": 6008,
                "gemini_output_tokens": 623,
                "gemini_total_tokens": 22921
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/M...",
            "token_counts": {
                "prompt_tokens": 130,
                "gemini_input_tokens": 11796,
                "gemini_output_tokens": 625,
                "gemini_total_tokens": 29438
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "diff_preview": "```diff\n--- a/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n+++ b/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n@@ -...",
            "token_counts": {
                "prompt_tokens": 22,
                "gemini_input_tokens": 116651,
                "gemini_output_tokens": 370,
                "gemini_total_tokens": 138412
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -297,7 +297,18 @@\n         // s...",
            "token_counts": {
                "prompt_tokens": 139,
                "gemini_input_tokens": 17451,
                "gemini_output_tokens": 361,
                "gemini_total_tokens": 34194
            }
        }
    ],
    "skipped_or_errored_diff_generation_log": [
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: ```",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 150,
                "gemini_input_tokens": 17674,
                "gemini_output_tokens": 1379,
                "gemini_total_tokens": 62371
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 137,
                "gemini_input_tokens": 110710,
                "gemini_output_tokens": 1279,
                "gemini_total_tokens": 160259
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 122,
                "gemini_input_tokens": 37835,
                "gemini_output_tokens": 1885,
                "gemini_total_tokens": 97970
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Skipped due to exception",
            "last_apply_error": "Skipped due to exception",
            "token_counts": {
                "prompt_tokens": 0,
                "gemini_input_tokens": 72736,
                "gemini_output_tokens": 916,
                "gemini_total_tokens": 106931
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -67,4 +70,22 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 141,
                "gemini_input_tokens": 33972,
                "gemini_output_tokens": 1993,
                "gemini_total_tokens": 97731
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file ojluni/src/main/java/java/util/zip/ZipFile.java\nHunk #1 FAILED at 1436.\npatch unexpectedly ends in middle of line\n1 out of 1 hunk FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 135,
                "gemini_input_tokens": 50932,
                "gemini_output_tokens": 967,
                "gemini_total_tokens": 92161
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\nHunk #1 succeeded at 21 (offset -1 lines).\nHunk #2 FAILED at 88.\nHunk #3 FAILED at 98.\npatch unexpectedly ends in middle of line\n2 out of 3 hunks FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 128,
                "gemini_input_tokens": 33671,
                "gemini_output_tokens": 1553,
                "gemini_total_tokens": 90271
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file services/usb/java/com/android/server/usb/UsbDeviceManager.java\nHunk #1 succeeded at 79 (offset -1 lines).\nHunk #2 FAILED at 721.\nHunk #3 succeeded at 1957 (offset -1 lines).\npatch unexpectedly ends in middle of line\n1 out of 3 hunks FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 137,
                "gemini_input_tokens": 109256,
                "gemini_output_tokens": 1210,
                "gemini_total_tokens": 156676
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file ojluni/src/main/java/java/util/zip/ZipFile.java\nHunk #1 FAILED at 1436.\npatch unexpectedly ends in middle of line\n1 out of 1 hunk FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 135,
                "gemini_input_tokens": 50975,
                "gemini_output_tokens": 982,
                "gemini_total_tokens": 89522
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: ```",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 148,
                "gemini_input_tokens": 17724,
                "gemini_output_tokens": 1413,
                "gemini_total_tokens": 58388
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 269,
                "gemini_input_tokens": 1193330,
                "gemini_output_tokens": 2018,
                "gemini_total_tokens": 1232620
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 215,
                "gemini_input_tokens": 905634,
                "gemini_output_tokens": 2010,
                "gemini_total_tokens": 942533
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 109,
                "gemini_input_tokens": 74271,
                "gemini_output_tokens": 1166,
                "gemini_total_tokens": 110273
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 293,
                "gemini_input_tokens": 150145,
                "gemini_output_tokens": 1304,
                "gemini_total_tokens": 184890
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -700,12 +700,15 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 133,
                "gemini_input_tokens": 74166,
                "gemini_output_tokens": 1520,
                "gemini_total_tokens": 117012
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file core/java/android/service/dreams/DreamService.java\nHunk #1 FAILED at 1122.\nHunk #2 FAILED at 1181.\nHunk #3 FAILED at 1487.\npatch unexpectedly ends in middle of line\n3 out of 3 hunks FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 179,
                "gemini_input_tokens": 64726,
                "gemini_output_tokens": 2732,
                "gemini_total_tokens": 111063
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 300,
                "gemini_input_tokens": 225521,
                "gemini_output_tokens": 1965,
                "gemini_total_tokens": 269744
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 177,
                "gemini_input_tokens": 64444,
                "gemini_output_tokens": 2448,
                "gemini_total_tokens": 119195
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 191,
                "gemini_input_tokens": 64051,
                "gemini_output_tokens": 2072,
                "gemini_total_tokens": 108029
            }
        }
    ]
}