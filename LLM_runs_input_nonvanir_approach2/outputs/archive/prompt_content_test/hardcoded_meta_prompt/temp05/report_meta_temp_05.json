{
    "run_timestamp": "20250611_104805",
    "target_downstream_version": "all_versions",
    "concurrency": 5,
    "temperature_setting": 0.5,
    "input_json_file": "inputs/top_11_vulns_2425.json",
    "summary": {
        "total_file_conflicts_to_process": 36,
        "files_attempted_for_llm_diff_generation": 36,
        "files_with_llm_diff_successfully_generated": 19,
        "files_skipped_pre_llm_call": 0,
        "files_with_llm_diff_generation_errors_or_skipped_in_func": 17,
        "successful_attempts_histogram": {
            "3 runs": 7,
            "2 runs": 5,
            "1 run": 7
        },
        "total_runtime_seconds_all": 12186.970000000001,
        "total_runtime_seconds_successful": 4866.52,
        "total_script_wall_clock_runtime_seconds": 2649.2384321899153,
        "total_gemini_input_tokens": 4233005,
        "total_gemini_output_tokens": 46664,
        "total_gemini_tokens": 5509815
    },
    "successfully_generated_diffs_log": [
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 73,
                "gemini_input_tokens": 44530,
                "gemini_output_tokens": 1033,
                "gemini_total_tokens": 92474
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 87,
                "gemini_input_tokens": 29573,
                "gemini_output_tokens": 732,
                "gemini_total_tokens": 57006
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -269,7 +269,29 @@\n         // s...",
            "token_counts": {
                "prompt_tokens": 262,
                "gemini_input_tokens": 33972,
                "gemini_output_tokens": 996,
                "gemini_total_tokens": 58593
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/M...",
            "token_counts": {
                "prompt_tokens": 109,
                "gemini_input_tokens": 22121,
                "gemini_output_tokens": 862,
                "gemini_total_tokens": 60966
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "```diff\n--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -52,11 ...",
            "token_counts": {
                "prompt_tokens": 104,
                "gemini_input_tokens": 18097,
                "gemini_output_tokens": 1284,
                "gemini_total_tokens": 49393
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -269,7 +269,23 @@\n         // s...",
            "token_counts": {
                "prompt_tokens": 186,
                "gemini_input_tokens": 16735,
                "gemini_output_tokens": 426,
                "gemini_total_tokens": 31165
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 80,
                "gemini_input_tokens": 44575,
                "gemini_output_tokens": 1130,
                "gemini_total_tokens": 76120
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/wm/ActivityTaskManagerService.java\n+++ b/services/core/java/com/android/server/wm/ActivityTaskMana...",
            "token_counts": {
                "prompt_tokens": 216,
                "gemini_input_tokens": 297457,
                "gemini_output_tokens": 2395,
                "gemini_total_tokens": 330993
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "diff_preview": "```diff\n--- a/services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java\n+++ b/services/devicepolicy/java/com/android/...",
            "token_counts": {
                "prompt_tokens": 243,
                "gemini_input_tokens": 301381,
                "gemini_output_tokens": 687,
                "gemini_total_tokens": 319953
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/wm/ActivityTaskManagerService.java\n+++ b/services/core/java/com/android/server/wm/ActivityTaskMana...",
            "token_counts": {
                "prompt_tokens": 224,
                "gemini_input_tokens": 197945,
                "gemini_output_tokens": 1525,
                "gemini_total_tokens": 214153
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "```diff\n--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidge...",
            "token_counts": {
                "prompt_tokens": 294,
                "gemini_input_tokens": 150142,
                "gemini_output_tokens": 1294,
                "gemini_total_tokens": 198939
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "diff_preview": "```diff\n--- a/core/java/android/service/dreams/DreamService.java\n+++ b/core/java/android/service/dreams/DreamService.java\n@@ -1140,6 +1140,110 @@\n    ...",
            "token_counts": {
                "prompt_tokens": 486,
                "gemini_input_tokens": 20784,
                "gemini_output_tokens": 1167,
                "gemini_total_tokens": 34523
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "```diff\n--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidge...",
            "token_counts": {
                "prompt_tokens": 287,
                "gemini_input_tokens": 74692,
                "gemini_output_tokens": 640,
                "gemini_total_tokens": 90821
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "```diff\n--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server...",
            "token_counts": {
                "prompt_tokens": 95,
                "gemini_input_tokens": 18200,
                "gemini_output_tokens": 331,
                "gemini_total_tokens": 25701
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "```diff\n--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server...",
            "token_counts": {
                "prompt_tokens": 114,
                "gemini_input_tokens": 73945,
                "gemini_output_tokens": 1208,
                "gemini_total_tokens": 117122
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "```diff\n--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -38,9 +...",
            "token_counts": {
                "prompt_tokens": 51,
                "gemini_input_tokens": 4749,
                "gemini_output_tokens": 172,
                "gemini_total_tokens": 19073
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "diff_preview": "```diff\n--- a/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n+++ b/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n@@ -...",
            "token_counts": {
                "prompt_tokens": 22,
                "gemini_input_tokens": 38763,
                "gemini_output_tokens": 124,
                "gemini_total_tokens": 45953
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/M...",
            "token_counts": {
                "prompt_tokens": 130,
                "gemini_input_tokens": 24043,
                "gemini_output_tokens": 1019,
                "gemini_total_tokens": 57358
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -297,7 +297,30 @@\n         // s...",
            "token_counts": {
                "prompt_tokens": 259,
                "gemini_input_tokens": 53456,
                "gemini_output_tokens": 1573,
                "gemini_total_tokens": 91898
            }
        }
    ],
    "skipped_or_errored_diff_generation_log": [
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Unexpected hunk found: @@ -122,12 +122,12 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 142,
                "gemini_input_tokens": 17674,
                "gemini_output_tokens": 1375,
                "gemini_total_tokens": 67262
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file ojluni/src/main/java/java/util/zip/ZipFile.java\nHunk #1 FAILED at 1436.\npatch unexpectedly ends in middle of line\n1 out of 1 hunk FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 128,
                "gemini_input_tokens": 50616,
                "gemini_output_tokens": 682,
                "gemini_total_tokens": 94015
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: ```",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 138,
                "gemini_input_tokens": 110882,
                "gemini_output_tokens": 1482,
                "gemini_total_tokens": 162197
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 141,
                "gemini_input_tokens": 37718,
                "gemini_output_tokens": 1950,
                "gemini_total_tokens": 97422
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Unexpected hunk found: @@ -1956,10 +1957,16 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 165,
                "gemini_input_tokens": 109332,
                "gemini_output_tokens": 1377,
                "gemini_total_tokens": 157334
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -67,4 +67,26 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 121,
                "gemini_input_tokens": 33408,
                "gemini_output_tokens": 1400,
                "gemini_total_tokens": 85306
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: ```",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 137,
                "gemini_input_tokens": 109241,
                "gemini_output_tokens": 1182,
                "gemini_total_tokens": 152013
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 214,
                "gemini_input_tokens": 338735,
                "gemini_output_tokens": 2365,
                "gemini_total_tokens": 369188
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -122,10 +122,10 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 141,
                "gemini_input_tokens": 17678,
                "gemini_output_tokens": 1359,
                "gemini_total_tokens": 58948
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 294,
                "gemini_input_tokens": 225517,
                "gemini_output_tokens": 1970,
                "gemini_total_tokens": 269302
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: ```",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 72,
                "gemini_input_tokens": 75734,
                "gemini_output_tokens": 1040,
                "gemini_total_tokens": 103979
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 157,
                "gemini_input_tokens": 1193798,
                "gemini_output_tokens": 2034,
                "gemini_total_tokens": 1236484
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 114,
                "gemini_input_tokens": 74148,
                "gemini_output_tokens": 1065,
                "gemini_total_tokens": 115165
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\nHunk #1 FAILED at 171.\nHunk #2 succeeded at 2850 with fuzz 1 (offset -2 lines).\npatch unexpectedly ends in middle of line\n1 out of 2 hunks FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 293,
                "gemini_input_tokens": 225492,
                "gemini_output_tokens": 1953,
                "gemini_total_tokens": 283683
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file core/java/android/service/dreams/DreamService.java\nHunk #1 FAILED at 1124.\nHunk #2 FAILED at 1183.\nHunk #3 FAILED at 1193.\nHunk #4 FAILED at 1489.\npatch unexpectedly ends in middle of line\n4 out of 4 hunks FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 209,
                "gemini_input_tokens": 64412,
                "gemini_output_tokens": 2451,
                "gemini_total_tokens": 108962
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 373,
                "gemini_input_tokens": 64007,
                "gemini_output_tokens": 2488,
                "gemini_total_tokens": 102792
            }
        },
        {
            "vulnerability_id": "ASB-A-317048495",
            "file_name": "packages/SystemUI/src/com/android/systemui/clipboardoverlay/ClipboardListener.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -98,8 +102,11 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 152,
                "gemini_input_tokens": 19453,
                "gemini_output_tokens": 1893,
                "gemini_total_tokens": 73559
            }
        }
    ]
}