{
    "run_timestamp": "20250607_022259",
    "target_downstream_version": "all_versions",
    "concurrency": 5,
    "temperature_setting": 0.7,
    "input_json_file": "inputs/top_11_vulns_2425.json",
    "summary": {
        "total_file_conflicts_to_process": 36,
        "files_attempted_for_llm_diff_generation": 36,
        "files_with_llm_diff_successfully_generated": 20,
        "files_skipped_pre_llm_call": 0,
        "files_with_llm_diff_generation_errors_or_skipped_in_func": 16,
        "successful_attempts_histogram": {
            "1 run": 10,
            "2 runs": 6,
            "3 runs": 4
        },
        "total_runtime_seconds_all": 10699.12,
        "total_runtime_seconds_successful": 4257.32,
        "total_script_wall_clock_runtime_seconds": 2286.5050692551304,
        "total_gemini_input_tokens": 4253920,
        "total_gemini_output_tokens": 41445,
        "total_gemini_tokens": 5389875
    },
    "successfully_generated_diffs_log": [
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -268,8 +268,19 @@\n         // s...",
            "token_counts": {
                "prompt_tokens": 163,
                "gemini_input_tokens": 16735,
                "gemini_output_tokens": 397,
                "gemini_total_tokens": 30014
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "```diff\n--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -48,11 ...",
            "token_counts": {
                "prompt_tokens": 147,
                "gemini_input_tokens": 5541,
                "gemini_output_tokens": 463,
                "gemini_total_tokens": 22821
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 102,
                "gemini_input_tokens": 14565,
                "gemini_output_tokens": 381,
                "gemini_total_tokens": 22725
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "diff_preview": "```diff\n--- a/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n+++ b/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n@@ -...",
            "token_counts": {
                "prompt_tokens": 40,
                "gemini_input_tokens": 73611,
                "gemini_output_tokens": 540,
                "gemini_total_tokens": 98719
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 73,
                "gemini_input_tokens": 29682,
                "gemini_output_tokens": 830,
                "gemini_total_tokens": 57340
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/M...",
            "token_counts": {
                "prompt_tokens": 28,
                "gemini_input_tokens": 24718,
                "gemini_output_tokens": 573,
                "gemini_total_tokens": 63618
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "diff_preview": "```diff\n--- a/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n+++ b/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n@@ -...",
            "token_counts": {
                "prompt_tokens": 130,
                "gemini_input_tokens": 36110,
                "gemini_output_tokens": 371,
                "gemini_total_tokens": 52863
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -269,7 +269,21 @@\n         // s...",
            "token_counts": {
                "prompt_tokens": 167,
                "gemini_input_tokens": 33935,
                "gemini_output_tokens": 816,
                "gemini_total_tokens": 59543
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/M...",
            "token_counts": {
                "prompt_tokens": 109,
                "gemini_input_tokens": 10815,
                "gemini_output_tokens": 434,
                "gemini_total_tokens": 28715
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "```diff\n--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -52,11 ...",
            "token_counts": {
                "prompt_tokens": 111,
                "gemini_input_tokens": 17965,
                "gemini_output_tokens": 1174,
                "gemini_total_tokens": 57350
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/M...",
            "token_counts": {
                "prompt_tokens": 22,
                "gemini_input_tokens": 33306,
                "gemini_output_tokens": 895,
                "gemini_total_tokens": 85121
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/wm/ActivityTaskManagerService.java\n+++ b/services/core/java/com/android/server/wm/ActivityTaskMana...",
            "token_counts": {
                "prompt_tokens": 245,
                "gemini_input_tokens": 225662,
                "gemini_output_tokens": 1761,
                "gemini_total_tokens": 246173
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "```diff\n--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server...",
            "token_counts": {
                "prompt_tokens": 88,
                "gemini_input_tokens": 24942,
                "gemini_output_tokens": 316,
                "gemini_total_tokens": 32740
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "```diff\n--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidge...",
            "token_counts": {
                "prompt_tokens": 293,
                "gemini_input_tokens": 150101,
                "gemini_output_tokens": 1282,
                "gemini_total_tokens": 182583
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "```diff\n--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidge...",
            "token_counts": {
                "prompt_tokens": 294,
                "gemini_input_tokens": 74692,
                "gemini_output_tokens": 643,
                "gemini_total_tokens": 86529
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "```diff\n--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -40,7 +...",
            "token_counts": {
                "prompt_tokens": 47,
                "gemini_input_tokens": 4749,
                "gemini_output_tokens": 150,
                "gemini_total_tokens": 13096
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "```diff\n--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server...",
            "token_counts": {
                "prompt_tokens": 100,
                "gemini_input_tokens": 55299,
                "gemini_output_tokens": 937,
                "gemini_total_tokens": 87670
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "diff_preview": "```diff\n--- a/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n+++ b/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n@@ -...",
            "token_counts": {
                "prompt_tokens": 22,
                "gemini_input_tokens": 38763,
                "gemini_output_tokens": 124,
                "gemini_total_tokens": 45767
            }
        },
        {
            "vulnerability_id": "ASB-A-317048495",
            "file_name": "packages/SystemUI/src/com/android/systemui/clipboardoverlay/ClipboardListener.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/clipboardoverlay/ClipboardListener.java\n+++ b/packages/SystemUI/src/com/android/systemui/clip...",
            "token_counts": {
                "prompt_tokens": 159,
                "gemini_input_tokens": 19500,
                "gemini_output_tokens": 1958,
                "gemini_total_tokens": 68900
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -297,7 +297,12 @@\n         // s...",
            "token_counts": {
                "prompt_tokens": 83,
                "gemini_input_tokens": 17451,
                "gemini_output_tokens": 227,
                "gemini_total_tokens": 35295
            }
        }
    ],
    "skipped_or_errored_diff_generation_log": [
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -445,9 +448,12 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 101,
                "gemini_input_tokens": 44650,
                "gemini_output_tokens": 1239,
                "gemini_total_tokens": 76685
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 265,
                "gemini_input_tokens": 51007,
                "gemini_output_tokens": 1186,
                "gemini_total_tokens": 95537
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -95,9 +95,10 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 156,
                "gemini_input_tokens": 17629,
                "gemini_output_tokens": 1387,
                "gemini_total_tokens": 61297
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: ```",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 154,
                "gemini_input_tokens": 109343,
                "gemini_output_tokens": 1350,
                "gemini_total_tokens": 169059
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 294,
                "gemini_input_tokens": 225577,
                "gemini_output_tokens": 2010,
                "gemini_total_tokens": 271219
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 217,
                "gemini_input_tokens": 297349,
                "gemini_output_tokens": 2287,
                "gemini_total_tokens": 323902
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -703,14 +701,16 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 162,
                "gemini_input_tokens": 74569,
                "gemini_output_tokens": 1636,
                "gemini_total_tokens": 110257
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 214,
                "gemini_input_tokens": 297376,
                "gemini_output_tokens": 2313,
                "gemini_total_tokens": 325440
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java\nHunk #1 FAILED at 2720.\npatch unexpectedly ends in middle of line\n1 out of 1 hunk FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 249,
                "gemini_input_tokens": 905217,
                "gemini_output_tokens": 1668,
                "gemini_total_tokens": 942992
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 244,
                "gemini_input_tokens": 794808,
                "gemini_output_tokens": 1195,
                "gemini_total_tokens": 836750
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 208,
                "gemini_input_tokens": 63835,
                "gemini_output_tokens": 1881,
                "gemini_total_tokens": 103248
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: ```",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 290,
                "gemini_input_tokens": 225599,
                "gemini_output_tokens": 2065,
                "gemini_total_tokens": 272181
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -698,14 +696,18 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 80,
                "gemini_input_tokens": 73936,
                "gemini_output_tokens": 1058,
                "gemini_total_tokens": 117401
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file core/java/android/service/dreams/DreamService.java\nHunk #1 FAILED at 1125.\nHunk #2 FAILED at 1184.\nHunk #3 FAILED at 1194.\nHunk #4 FAILED at 1490.\npatch unexpectedly ends in middle of line\n4 out of 4 hunks FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 177,
                "gemini_input_tokens": 64156,
                "gemini_output_tokens": 2137,
                "gemini_total_tokens": 112599
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -1487,6 +1499,7 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 249,
                "gemini_input_tokens": 65030,
                "gemini_output_tokens": 3145,
                "gemini_total_tokens": 114475
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 85,
                "gemini_input_tokens": 35697,
                "gemini_output_tokens": 616,
                "gemini_total_tokens": 79251
            }
        }
    ]
}