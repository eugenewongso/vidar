{
    "run_timestamp": "20250606_050129",
    "target_downstream_version": "all_versions",
    "concurrency": 5,
    "temperature_setting": 1.0,
    "input_json_file": "inputs/top_11_vulns_2425.json",
    "summary": {
        "total_file_conflicts_matching_version": 36,
        "files_attempted_for_llm_diff_generation": 36,
        "files_with_llm_diff_successfully_generated": 19,
        "files_skipped_pre_llm_call": 0,
        "files_with_llm_diff_generation_errors_or_skipped_in_func": 17,
        "successful_attempts_histogram": {
            "1 run": 12,
            "2 runs": 4,
            "3 runs": 3
        },
        "total_runtime_seconds_all": 11252.819999999998,
        "total_runtime_seconds_successful": 3921.5,
        "total_script_wall_clock_runtime_seconds": 2493.0641005961224,
        "total_gemini_input_tokens": 3472854,
        "total_gemini_output_tokens": 45096,
        "total_gemini_tokens": 4650183
    },
    "successfully_generated_diffs_log": [
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "diff_preview": "```diff\n--- a/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n+++ b/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n@@ -...",
            "token_counts": {
                "prompt_tokens": 142,
                "gemini_input_tokens": 36562,
                "gemini_output_tokens": 394,
                "gemini_total_tokens": 48809
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 79,
                "gemini_input_tokens": 14565,
                "gemini_output_tokens": 348,
                "gemini_total_tokens": 27290
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/M...",
            "token_counts": {
                "prompt_tokens": 22,
                "gemini_input_tokens": 10815,
                "gemini_output_tokens": 167,
                "gemini_total_tokens": 22139
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 95,
                "gemini_input_tokens": 29578,
                "gemini_output_tokens": 766,
                "gemini_total_tokens": 49144
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "```diff\n--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -52,11 ...",
            "token_counts": {
                "prompt_tokens": 104,
                "gemini_input_tokens": 5669,
                "gemini_output_tokens": 324,
                "gemini_total_tokens": 15189
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/M...",
            "token_counts": {
                "prompt_tokens": 125,
                "gemini_input_tokens": 10815,
                "gemini_output_tokens": 583,
                "gemini_total_tokens": 26429
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 73,
                "gemini_input_tokens": 29547,
                "gemini_output_tokens": 681,
                "gemini_total_tokens": 55845
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/wm/ActivityTaskManagerService.java\n+++ b/services/core/java/com/android/server/wm/ActivityTaskMana...",
            "token_counts": {
                "prompt_tokens": 216,
                "gemini_input_tokens": 112335,
                "gemini_output_tokens": 751,
                "gemini_total_tokens": 120967
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "```diff\n--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidge...",
            "token_counts": {
                "prompt_tokens": 294,
                "gemini_input_tokens": 150091,
                "gemini_output_tokens": 1296,
                "gemini_total_tokens": 180596
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "```diff\n--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server...",
            "token_counts": {
                "prompt_tokens": 99,
                "gemini_input_tokens": 24942,
                "gemini_output_tokens": 337,
                "gemini_total_tokens": 31717
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "```diff\n--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidge...",
            "token_counts": {
                "prompt_tokens": 299,
                "gemini_input_tokens": 74692,
                "gemini_output_tokens": 651,
                "gemini_total_tokens": 88501
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "diff_preview": "```diff\n--- a/services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java\n+++ b/services/devicepolicy/java/com/android/...",
            "token_counts": {
                "prompt_tokens": 224,
                "gemini_input_tokens": 301381,
                "gemini_output_tokens": 662,
                "gemini_total_tokens": 315398
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "diff_preview": "```diff\n--- a/services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java\n+++ b/services/devicepolicy/java/com/android/...",
            "token_counts": {
                "prompt_tokens": 123,
                "gemini_input_tokens": 795295,
                "gemini_output_tokens": 919,
                "gemini_total_tokens": 840594
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/wm/ActivityTaskManagerService.java\n+++ b/services/core/java/com/android/server/wm/ActivityTaskMana...",
            "token_counts": {
                "prompt_tokens": 220,
                "gemini_input_tokens": 297349,
                "gemini_output_tokens": 2293,
                "gemini_total_tokens": 340166
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "```diff\n--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidge...",
            "token_counts": {
                "prompt_tokens": 294,
                "gemini_input_tokens": 74692,
                "gemini_output_tokens": 643,
                "gemini_total_tokens": 87619
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/M...",
            "token_counts": {
                "prompt_tokens": 24,
                "gemini_input_tokens": 11796,
                "gemini_output_tokens": 195,
                "gemini_total_tokens": 20437
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "diff_preview": "```diff\n--- a/core/java/android/service/dreams/DreamService.java\n+++ b/core/java/android/service/dreams/DreamService.java\n@@ -1140,6 +1140,88 @@\n     ...",
            "token_counts": {
                "prompt_tokens": 390,
                "gemini_input_tokens": 64226,
                "gemini_output_tokens": 2664,
                "gemini_total_tokens": 111033
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "diff_preview": "```diff\n--- a/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n+++ b/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n@@ -...",
            "token_counts": {
                "prompt_tokens": 22,
                "gemini_input_tokens": 38763,
                "gemini_output_tokens": 124,
                "gemini_total_tokens": 47527
            }
        },
        {
            "vulnerability_id": "ASB-A-317048495",
            "file_name": "packages/SystemUI/src/com/android/systemui/clipboardoverlay/ClipboardListener.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/clipboardoverlay/ClipboardListener.java\n+++ b/packages/SystemUI/src/com/android/systemui/clip...",
            "token_counts": {
                "prompt_tokens": 162,
                "gemini_input_tokens": 19543,
                "gemini_output_tokens": 2005,
                "gemini_total_tokens": 72283
            }
        }
    ],
    "skipped_or_errored_diff_generation_log": [
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 190,
                "gemini_input_tokens": 51187,
                "gemini_output_tokens": 1309,
                "gemini_total_tokens": 86989
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -55,6 +56,7 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 149,
                "gemini_input_tokens": 37081,
                "gemini_output_tokens": 1487,
                "gemini_total_tokens": 82647
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 148,
                "gemini_input_tokens": 18166,
                "gemini_output_tokens": 1878,
                "gemini_total_tokens": 70999
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 148,
                "gemini_input_tokens": 109366,
                "gemini_output_tokens": 1311,
                "gemini_total_tokens": 157201
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file ojluni/src/main/java/java/util/zip/ZipFile.java\nHunk #1 FAILED at 1436.\npatch unexpectedly ends in middle of line\n1 out of 1 hunk FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 135,
                "gemini_input_tokens": 50627,
                "gemini_output_tokens": 704,
                "gemini_total_tokens": 88907
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Unexpected hunk found: @@ -1956,12 +1956,17 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 138,
                "gemini_input_tokens": 109526,
                "gemini_output_tokens": 1460,
                "gemini_total_tokens": 158658
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file ojluni/src/main/java/java/util/zip/ZipFile.java\nHunk #1 FAILED at 1436.\npatch unexpectedly ends in middle of line\n1 out of 1 hunk FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 135,
                "gemini_input_tokens": 51117,
                "gemini_output_tokens": 1135,
                "gemini_total_tokens": 95543
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: ```",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 151,
                "gemini_input_tokens": 17721,
                "gemini_output_tokens": 1434,
                "gemini_total_tokens": 64528
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 256,
                "gemini_input_tokens": 297397,
                "gemini_output_tokens": 2382,
                "gemini_total_tokens": 328217
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 114,
                "gemini_input_tokens": 74383,
                "gemini_output_tokens": 1301,
                "gemini_total_tokens": 114617
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 271,
                "gemini_input_tokens": 225499,
                "gemini_output_tokens": 1924,
                "gemini_total_tokens": 275051
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -699,14 +698,17 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 133,
                "gemini_input_tokens": 73859,
                "gemini_output_tokens": 1204,
                "gemini_total_tokens": 110305
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file core/java/android/service/dreams/DreamService.java\nHunk #1 FAILED at 1140.\n1 out of 1 hunk FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 552,
                "gemini_input_tokens": 65116,
                "gemini_output_tokens": 3938,
                "gemini_total_tokens": 126141
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 450,
                "gemini_input_tokens": 64725,
                "gemini_output_tokens": 3389,
                "gemini_total_tokens": 108872
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: ```",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 95,
                "gemini_input_tokens": 55698,
                "gemini_output_tokens": 1297,
                "gemini_total_tokens": 105013
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -57,7 +62,23 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 235,
                "gemini_input_tokens": 15955,
                "gemini_output_tokens": 2436,
                "gemini_total_tokens": 80742
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file ojluni/src/main/java/java/util/zip/ZipFile.java\nHunk #1 FAILED at 1436.\npatch unexpectedly ends in middle of line\n1 out of 1 hunk FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 135,
                "gemini_input_tokens": 52775,
                "gemini_output_tokens": 704,
                "gemini_total_tokens": 94070
            }
        }
    ]
}