{
    "run_timestamp": "20250606_081335",
    "target_downstream_version": "all_versions",
    "concurrency": 5,
    "temperature_setting": 0.0,
    "input_json_file": "inputs/top_11_vulns_2425.json",
    "summary": {
        "total_file_conflicts_to_process": 36,
        "files_attempted_for_llm_diff_generation": 36,
        "files_with_llm_diff_successfully_generated": 24,
        "files_skipped_pre_llm_call": 0,
        "files_with_llm_diff_generation_errors_or_skipped_in_func": 12,
        "successful_attempts_histogram": {
            "1 run": 16,
            "2 runs": 5,
            "3 runs": 3
        },
        "total_runtime_seconds_all": 10173.89,
        "total_runtime_seconds_successful": 4389.41,
        "total_script_wall_clock_runtime_seconds": 2224.620751189068,
        "total_gemini_input_tokens": 4015990,
        "total_gemini_output_tokens": 40375,
        "total_gemini_tokens": 5053202
    },
    "successfully_generated_diffs_log": [
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 73,
                "gemini_input_tokens": 14565,
                "gemini_output_tokens": 336,
                "gemini_total_tokens": 23263
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -269,10 +269,21 @@\n         // ...",
            "token_counts": {
                "prompt_tokens": 190,
                "gemini_input_tokens": 16735,
                "gemini_output_tokens": 458,
                "gemini_total_tokens": 31344
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/M...",
            "token_counts": {
                "prompt_tokens": 20,
                "gemini_input_tokens": 10815,
                "gemini_output_tokens": 148,
                "gemini_total_tokens": 24021
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 76,
                "gemini_input_tokens": 14565,
                "gemini_output_tokens": 351,
                "gemini_total_tokens": 25124
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "```diff\n--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -52,11 ...",
            "token_counts": {
                "prompt_tokens": 104,
                "gemini_input_tokens": 5669,
                "gemini_output_tokens": 324,
                "gemini_total_tokens": 16274
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -268,8 +268,17 @@\n         // s...",
            "token_counts": {
                "prompt_tokens": 159,
                "gemini_input_tokens": 34029,
                "gemini_output_tokens": 964,
                "gemini_total_tokens": 65571
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/M...",
            "token_counts": {
                "prompt_tokens": 20,
                "gemini_input_tokens": 10815,
                "gemini_output_tokens": 148,
                "gemini_total_tokens": 24021
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelp...",
            "token_counts": {
                "prompt_tokens": 73,
                "gemini_input_tokens": 29553,
                "gemini_output_tokens": 690,
                "gemini_total_tokens": 53226
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "```diff\n--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidge...",
            "token_counts": {
                "prompt_tokens": 299,
                "gemini_input_tokens": 74692,
                "gemini_output_tokens": 651,
                "gemini_total_tokens": 85806
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/wm/ActivityTaskManagerService.java\n+++ b/services/core/java/com/android/server/wm/ActivityTaskMana...",
            "token_counts": {
                "prompt_tokens": 239,
                "gemini_input_tokens": 225482,
                "gemini_output_tokens": 1567,
                "gemini_total_tokens": 246874
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "```diff\n--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server...",
            "token_counts": {
                "prompt_tokens": 88,
                "gemini_input_tokens": 24942,
                "gemini_output_tokens": 316,
                "gemini_total_tokens": 31310
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -269,7 +269,18 @@\n         // s...",
            "token_counts": {
                "prompt_tokens": 197,
                "gemini_input_tokens": 51099,
                "gemini_output_tokens": 1233,
                "gemini_total_tokens": 92511
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "```diff\n--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -48,11 ...",
            "token_counts": {
                "prompt_tokens": 147,
                "gemini_input_tokens": 17943,
                "gemini_output_tokens": 1641,
                "gemini_total_tokens": 62992
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "diff_preview": "```diff\n--- a/services/core/java/com/android/server/wm/ActivityTaskManagerService.java\n+++ b/services/core/java/com/android/server/wm/ActivityTaskMana...",
            "token_counts": {
                "prompt_tokens": 219,
                "gemini_input_tokens": 98566,
                "gemini_output_tokens": 756,
                "gemini_total_tokens": 107252
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "```diff\n--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server...",
            "token_counts": {
                "prompt_tokens": 107,
                "gemini_input_tokens": 24452,
                "gemini_output_tokens": 319,
                "gemini_total_tokens": 40795
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "diff_preview": "```diff\n--- a/services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java\n+++ b/services/devicepolicy/java/com/android/...",
            "token_counts": {
                "prompt_tokens": 249,
                "gemini_input_tokens": 603440,
                "gemini_output_tokens": 1330,
                "gemini_total_tokens": 631966
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "```diff\n--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidge...",
            "token_counts": {
                "prompt_tokens": 299,
                "gemini_input_tokens": 74692,
                "gemini_output_tokens": 651,
                "gemini_total_tokens": 87034
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "diff_preview": "```diff\n--- a/core/java/android/service/dreams/DreamService.java\n+++ b/core/java/android/service/dreams/DreamService.java\n@@ -1140,6 +1140,101 @@\n    ...",
            "token_counts": {
                "prompt_tokens": 441,
                "gemini_input_tokens": 20784,
                "gemini_output_tokens": 1102,
                "gemini_total_tokens": 31827
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "```diff\n--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server...",
            "token_counts": {
                "prompt_tokens": 101,
                "gemini_input_tokens": 49114,
                "gemini_output_tokens": 750,
                "gemini_total_tokens": 73892
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "```diff\n--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server...",
            "token_counts": {
                "prompt_tokens": 106,
                "gemini_input_tokens": 18200,
                "gemini_output_tokens": 352,
                "gemini_total_tokens": 29084
            }
        },
        {
            "vulnerability_id": "ASB-A-317048495",
            "file_name": "packages/SystemUI/src/com/android/systemui/clipboardoverlay/ClipboardListener.java",
            "diff_preview": "```diff\n--- a/packages/SystemUI/src/com/android/systemui/clipboardoverlay/ClipboardListener.java\n+++ b/packages/SystemUI/src/com/android/systemui/clip...",
            "token_counts": {
                "prompt_tokens": 157,
                "gemini_input_tokens": 6008,
                "gemini_output_tokens": 605,
                "gemini_total_tokens": 22028
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "```diff\n--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -37,10 ...",
            "token_counts": {
                "prompt_tokens": 59,
                "gemini_input_tokens": 4749,
                "gemini_output_tokens": 185,
                "gemini_total_tokens": 18004
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "diff_preview": "```diff\n--- a/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n+++ b/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n@@ -...",
            "token_counts": {
                "prompt_tokens": 22,
                "gemini_input_tokens": 38763,
                "gemini_output_tokens": 124,
                "gemini_total_tokens": 46344
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "```diff\n--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -297,7 +297,23 @@\n         // s...",
            "token_counts": {
                "prompt_tokens": 281,
                "gemini_input_tokens": 53635,
                "gemini_output_tokens": 1709,
                "gemini_total_tokens": 94604
            }
        }
    ],
    "skipped_or_errored_diff_generation_log": [
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: ```",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 175,
                "gemini_input_tokens": 18005,
                "gemini_output_tokens": 1859,
                "gemini_total_tokens": 66390
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 138,
                "gemini_input_tokens": 110647,
                "gemini_output_tokens": 1222,
                "gemini_total_tokens": 162615
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -103,15 +104,16 @@ public interface MediaModule {\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 109,
                "gemini_input_tokens": 37437,
                "gemini_output_tokens": 1479,
                "gemini_total_tokens": 95369
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 139,
                "gemini_input_tokens": 109264,
                "gemini_output_tokens": 1230,
                "gemini_total_tokens": 159819
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 132,
                "gemini_input_tokens": 109230,
                "gemini_output_tokens": 1167,
                "gemini_total_tokens": 156444
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 299,
                "gemini_input_tokens": 225543,
                "gemini_output_tokens": 1964,
                "gemini_total_tokens": 268139
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file services/core/java/com/android/server/wm/ActivityTaskManagerService.java\nHunk #1 FAILED at 1411.\n1 out of 1 hunk FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 242,
                "gemini_input_tokens": 297322,
                "gemini_output_tokens": 2326,
                "gemini_total_tokens": 339282
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 175,
                "gemini_input_tokens": 1193145,
                "gemini_output_tokens": 1476,
                "gemini_total_tokens": 1237660
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 166,
                "gemini_input_tokens": 225505,
                "gemini_output_tokens": 1712,
                "gemini_total_tokens": 270024
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 487,
                "gemini_input_tokens": 64783,
                "gemini_output_tokens": 3491,
                "gemini_total_tokens": 115255
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 566,
                "gemini_input_tokens": 65208,
                "gemini_output_tokens": 4114,
                "gemini_total_tokens": 122238
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 101,
                "gemini_input_tokens": 36594,
                "gemini_output_tokens": 1625,
                "gemini_total_tokens": 94800
            }
        }
    ]
}