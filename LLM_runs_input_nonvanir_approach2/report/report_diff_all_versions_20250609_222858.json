{
    "run_timestamp": "20250609_222858",
    "target_downstream_version": "all_versions",
    "concurrency": 5,
    "temperature_setting": 0.0,
    "input_json_file": "inputs/top_11_vulns_2425.json",
    "summary": {
        "total_file_conflicts_to_process": 36,
        "files_attempted_for_llm_diff_generation": 36,
        "files_with_llm_diff_successfully_generated": 14,
        "files_skipped_pre_llm_call": 0,
        "files_with_llm_diff_generation_errors_or_skipped_in_func": 22,
        "successful_attempts_histogram": {
            "1 run": 6,
            "2 runs": 6,
            "3 runs": 2
        },
        "total_runtime_seconds_all": 12794.000000000004,
        "total_runtime_seconds_successful": 3703.6,
        "total_script_wall_clock_runtime_seconds": 2717.150974080898,
        "total_gemini_input_tokens": 4553633,
        "total_gemini_output_tokens": 50337,
        "total_gemini_tokens": 5902049
    },
    "successfully_generated_diffs_log": [
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "diff_preview": "--- a/services/core/java/com/android/server/notification/SnoozeHelper.java\n+++ b/services/core/java/com/android/server/notification/SnoozeHelper.java\n...",
            "token_counts": {
                "prompt_tokens": 85,
                "gemini_input_tokens": 14674,
                "gemini_output_tokens": 359,
                "gemini_total_tokens": 25130
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModu...",
            "token_counts": {
                "prompt_tokens": 75,
                "gemini_input_tokens": 12263,
                "gemini_output_tokens": 355,
                "gemini_total_tokens": 24356
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "diff_preview": "--- a/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n+++ b/services/usb/java/com/android/server/usb/UsbDeviceManager.java\n@@ -80,6 +80...",
            "token_counts": {
                "prompt_tokens": 133,
                "gemini_input_tokens": 36671,
                "gemini_output_tokens": 393,
                "gemini_total_tokens": 49906
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -49,11 +49,11 @...",
            "token_counts": {
                "prompt_tokens": 145,
                "gemini_input_tokens": 11749,
                "gemini_output_tokens": 899,
                "gemini_total_tokens": 76957
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "diff_preview": "--- a/src/com/android/settings/search/SearchResultTrampoline.java\n+++ b/src/com/android/settings/search/SearchResultTrampoline.java\n@@ -52,11 +52,11 @...",
            "token_counts": {
                "prompt_tokens": 102,
                "gemini_input_tokens": 5778,
                "gemini_output_tokens": 324,
                "gemini_total_tokens": 13512
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -269,7 +269,39 @@\n         // sun.misc....",
            "token_counts": {
                "prompt_tokens": 328,
                "gemini_input_tokens": 34200,
                "gemini_output_tokens": 1227,
                "gemini_total_tokens": 65109
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidget/AppWid...",
            "token_counts": {
                "prompt_tokens": 297,
                "gemini_input_tokens": 74801,
                "gemini_output_tokens": 651,
                "gemini_total_tokens": 89441
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "diff_preview": "--- a/services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java\n+++ b/services/devicepolicy/java/com/android/server/d...",
            "token_counts": {
                "prompt_tokens": 145,
                "gemini_input_tokens": 795461,
                "gemini_output_tokens": 965,
                "gemini_total_tokens": 830370
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server/compani...",
            "token_counts": {
                "prompt_tokens": 99,
                "gemini_input_tokens": 49438,
                "gemini_output_tokens": 908,
                "gemini_total_tokens": 78744
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "diff_preview": "--- a/services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java\n+++ b/services/appwidget/java/com/android/server/appwidget/AppWid...",
            "token_counts": {
                "prompt_tokens": 292,
                "gemini_input_tokens": 149600,
                "gemini_output_tokens": 1325,
                "gemini_total_tokens": 184239
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "diff_preview": "--- a/services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\n+++ b/services/companion/java/com/android/server/compani...",
            "token_counts": {
                "prompt_tokens": 101,
                "gemini_input_tokens": 36949,
                "gemini_output_tokens": 678,
                "gemini_total_tokens": 57470
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "diff_preview": "--- a/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java\n+++ b/packages/SystemUI/src/com/android/systemui/media/dagger/MediaModu...",
            "token_counts": {
                "prompt_tokens": 22,
                "gemini_input_tokens": 11905,
                "gemini_output_tokens": 195,
                "gemini_total_tokens": 27546
            }
        },
        {
            "vulnerability_id": "ASB-A-317048495",
            "file_name": "packages/SystemUI/src/com/android/systemui/clipboardoverlay/ClipboardListener.java",
            "diff_preview": "--- a/packages/SystemUI/src/com/android/systemui/clipboardoverlay/ClipboardListener.java\n+++ b/packages/SystemUI/src/com/android/systemui/clipboardove...",
            "token_counts": {
                "prompt_tokens": 157,
                "gemini_input_tokens": 19634,
                "gemini_output_tokens": 1882,
                "gemini_total_tokens": 68412
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "diff_preview": "--- a/ojluni/src/main/java/java/util/zip/ZipFile.java\n+++ b/ojluni/src/main/java/java/util/zip/ZipFile.java\n@@ -297,7 +297,13 @@\n         // sun.misc....",
            "token_counts": {
                "prompt_tokens": 111,
                "gemini_input_tokens": 35567,
                "gemini_output_tokens": 732,
                "gemini_total_tokens": 72244
            }
        }
    ],
    "skipped_or_errored_diff_generation_log": [
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 167,
                "gemini_input_tokens": 51622,
                "gemini_output_tokens": 1514,
                "gemini_total_tokens": 85361
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is shorter than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 78,
                "gemini_input_tokens": 44764,
                "gemini_output_tokens": 1095,
                "gemini_total_tokens": 84196
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is shorter than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 151,
                "gemini_input_tokens": 109608,
                "gemini_output_tokens": 1410,
                "gemini_total_tokens": 165165
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -34,6 +37,8 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 154,
                "gemini_input_tokens": 33854,
                "gemini_output_tokens": 1762,
                "gemini_total_tokens": 95313
            }
        },
        {
            "vulnerability_id": "ASB-A-307948424",
            "file_name": "services/core/java/com/android/server/notification/SnoozeHelper.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is shorter than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 71,
                "gemini_input_tokens": 44690,
                "gemini_output_tokens": 1012,
                "gemini_total_tokens": 78035
            }
        },
        {
            "vulnerability_id": "ASB-A-309938635",
            "file_name": "ojluni/src/main/java/java/util/zip/ZipFile.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 374,
                "gemini_input_tokens": 51454,
                "gemini_output_tokens": 1822,
                "gemini_total_tokens": 87679
            }
        },
        {
            "vulnerability_id": "ASB-A-314333719",
            "file_name": "packages/SystemUI/src/com/android/systemui/media/dagger/MediaModule.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -67,4 +70,21 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 125,
                "gemini_input_tokens": 33703,
                "gemini_output_tokens": 1522,
                "gemini_total_tokens": 92402
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is shorter than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 212,
                "gemini_input_tokens": 338829,
                "gemini_output_tokens": 2249,
                "gemini_total_tokens": 369203
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 135,
                "gemini_input_tokens": 109487,
                "gemini_output_tokens": 1222,
                "gemini_total_tokens": 162360
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Unexpected hunk found: @@ -121,10 +121,10 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 150,
                "gemini_input_tokens": 18410,
                "gemini_output_tokens": 1919,
                "gemini_total_tokens": 68012
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\nHunk #1 FAILED at 929.\n1 out of 1 hunk FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 113,
                "gemini_input_tokens": 75835,
                "gemini_output_tokens": 1075,
                "gemini_total_tokens": 102128
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is shorter than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 240,
                "gemini_input_tokens": 297589,
                "gemini_output_tokens": 2385,
                "gemini_total_tokens": 337837
            }
        },
        {
            "vulnerability_id": "ASB-A-382064697",
            "file_name": "services/devicepolicy/java/com/android/server/devicepolicy/DevicePolicyManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is shorter than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 229,
                "gemini_input_tokens": 905826,
                "gemini_output_tokens": 2098,
                "gemini_total_tokens": 945957
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 183,
                "gemini_input_tokens": 225725,
                "gemini_output_tokens": 1763,
                "gemini_total_tokens": 283291
            }
        },
        {
            "vulnerability_id": "ASB-A-313428840",
            "file_name": "services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Valid patch format",
            "last_apply_error": "Patch failed in repo: checking file services/companion/java/com/android/server/companion/CompanionDeviceManagerService.java\nHunk #1 succeeded at 89 (offset -1 lines).\nHunk #2 FAILED at 700.\n1 out of 2 hunks FAILED\npatch unexpectedly ends in middle of line",
            "token_counts": {
                "prompt_tokens": 185,
                "gemini_input_tokens": 74922,
                "gemini_output_tokens": 1850,
                "gemini_total_tokens": 116836
            }
        },
        {
            "vulnerability_id": "ASB-A-230492947",
            "file_name": "services/core/java/com/android/server/wm/ActivityTaskManagerService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 215,
                "gemini_input_tokens": 297531,
                "gemini_output_tokens": 2278,
                "gemini_total_tokens": 336004
            }
        },
        {
            "vulnerability_id": "ASB-A-353240784",
            "file_name": "services/appwidget/java/com/android/server/appwidget/AppWidgetServiceImpl.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -2851,11 +2863,32 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 282,
                "gemini_input_tokens": 225702,
                "gemini_output_tokens": 1971,
                "gemini_total_tokens": 277425
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 334,
                "gemini_input_tokens": 64175,
                "gemini_output_tokens": 2363,
                "gemini_total_tokens": 117247
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk diff line expected: @@ -1140,6 +1141,83 @@\n",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 507,
                "gemini_input_tokens": 64426,
                "gemini_output_tokens": 3008,
                "gemini_total_tokens": 110980
            }
        },
        {
            "vulnerability_id": "ASB-A-353712853",
            "file_name": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is shorter than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 20,
                "gemini_input_tokens": 116860,
                "gemini_output_tokens": 372,
                "gemini_total_tokens": 136197
            }
        },
        {
            "vulnerability_id": "ASB-A-300090204",
            "file_name": "core/java/android/service/dreams/DreamService.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 415,
                "gemini_input_tokens": 64725,
                "gemini_output_tokens": 3090,
                "gemini_total_tokens": 113646
            }
        },
        {
            "vulnerability_id": "ASB-A-333364513",
            "file_name": "src/com/android/settings/search/SearchResultTrampoline.java",
            "reason": "All 3 attempts failed.",
            "last_format_error": "Invalid patch format: Hunk is longer than expected",
            "last_apply_error": "Skipped due to format error",
            "token_counts": {
                "prompt_tokens": 281,
                "gemini_input_tokens": 15206,
                "gemini_output_tokens": 1664,
                "gemini_total_tokens": 73339
            }
        }
    ]
}